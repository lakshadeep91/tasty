var songs_data = [
{
    "title": "Canon In D",
    "artist": "Canon Artist",
    "song_url": "audio/sample1.mp3",
    "type": "POLISH_SECULAR",
    "files": [
        {
            "name": "File 1 bla bla bla bla",
            "type": "VISIBLE",
            "id": "1G1_ce39VL-e3LEFEmeqM7DPH-qPhda4n"
        },
        {
            "name": "File 2 bla bla bla bla",
            "type": "VISIBLE",
            "id": "1G1_ce39VL-e3LEFEmeqM7DPH-qPhda4n"
        },
        {
            "name": "File 3 bla bla bla bla",
            "type": "PROTECTED",
            "id": ""
        },
    ]
},
{
    "title": "My heart will go on",
    "artist": "Canon Artist",
    "song_url": "audio/sample1.mp3",
    "type": "POLISH_SECULAR",
    "files": [
        {
            "name": "File 1 bla bla bla bla",
            "type": "VISIBLE",
            "id": "1G1_ce39VL-e3LEFEmeqM7DPH-qPhda4n"
        },
        {
            "name": "File 2 bla bla bla bla",
            "type": "VISIBLE",
            "id": "1G1_ce39VL-e3LEFEmeqM7DPH-qPhda4n"
        },
        {
            "name": "File 3 bla bla bla bla",
            "type": "PROTECTED",
            "id": ""
        },
    ]
},
{
    "title": "Symphony No. 40",
    "artist": "Wolfgang Amadeus Mozart",
    "song_url": "audio/sample1.mp3",
    "type": "POLISH_SECULAR",
    "files": [
        {
            "name": "File 1 bla bla bla bla",
            "type": "VISIBLE",
            "id": "1G1_ce39VL-e3LEFEmeqM7DPH-qPhda4n"
        },
        {
            "name": "File 2 bla bla bla bla",
            "type": "VISIBLE",
            "id": "1G1_ce39VL-e3LEFEmeqM7DPH-qPhda4n"
        },
        {
            "name": "File 3 bla bla bla bla",
            "type": "PROTECTED",
            "url": ""
        },
    ]
},
{
    "title": "Canon In D 2",
    "artist": "Canon Artist",
    "song_url": "audio/sample1.mp3",
    "type": "POLISH_SECULAR",
    "files": [
        {
            "name": "File 1 bla bla bla bla",
            "type": "VISIBLE",
            "id": "1G1_ce39VL-e3LEFEmeqM7DPH-qPhda4n"
        },
        {
            "name": "File 2 bla bla bla bla",
            "type": "VISIBLE",
            "id": "1G1_ce39VL-e3LEFEmeqM7DPH-qPhda4n"
        },
        {
            "name": "File 3 bla bla bla bla",
            "type": "PROTECTED",
            "id": ""
        },
    ]
},
{
    "title": "Canon In D 3",
    "artist": "Canon Artist",
    "song_url": "audio/sample1.mp3",
    "type": "POLISH_SECULAR",
    "files": [
        {
            "name": "File 1 bla bla bla bla",
            "type": "VISIBLE",
            "id": "1G1_ce39VL-e3LEFEmeqM7DPH-qPhda4n"
        },
        {
            "name": "File 2 bla bla bla bla",
            "type": "VISIBLE",
            "id": "1G1_ce39VL-e3LEFEmeqM7DPH-qPhda4n"
        },
        {
            "name": "File 3 bla bla bla bla",
            "type": "PROTECTED",
            "id": ""
        },
    ]
},
{
    "title": "Canon In D 4",
    "artist": "Canon Artist",
    "song_url": "audio/sample1.mp3",
    "type": "POLISH_SECULAR",
    "files": [
        {
            "name": "File 1 bla bla bla bla",
            "type": "VISIBLE",
            "id": "1G1_ce39VL-e3LEFEmeqM7DPH-qPhda4n"
        },
        {
            "name": "File 2 bla bla bla bla",
            "type": "VISIBLE",
            "id": "1G1_ce39VL-e3LEFEmeqM7DPH-qPhda4n"
        },
        {
            "name": "File 3 bla bla bla bla",
            "type": "PROTECTED",
            "id": ""
        },
    ]
},
{
    "title": "Canon In D 5",
    "artist": "Canon Artist",
    "song_url": "audio/sample1.mp3",
    "type": "POLISH_SECULAR",
    "files": [
        {
            "name": "File 1 bla bla bla bla",
            "type": "VISIBLE",
            "id": "1G1_ce39VL-e3LEFEmeqM7DPH-qPhda4n"
        },
        {
            "name": "File 2 bla bla bla bla",
            "type": "VISIBLE",
            "id": "1G1_ce39VL-e3LEFEmeqM7DPH-qPhda4n"
        },
        {
            "name": "File 3 bla bla bla bla",
            "type": "PROTECTED",
            "id": ""
        },
    ]
},
{
    "title": "Canon In D 6",
    "artist": "Canon Artist",
    "song_url": "audio/sample1.mp3",
    "type": "POLISH_SECULAR",
    "files": [
        {
            "name": "File 1 bla bla bla bla",
            "type": "VISIBLE",
            "id": "1G1_ce39VL-e3LEFEmeqM7DPH-qPhda4n"
        },
        {
            "name": "File 2 bla bla bla bla",
            "type": "VISIBLE",
            "id": "1G1_ce39VL-e3LEFEmeqM7DPH-qPhda4n"
        },
        {
            "name": "File 3 bla bla bla bla",
            "type": "PROTECTED",
            "id": ""
        },
    ]
},
{
    "title": "Canon In D 7",
    "artist": "Canon Artist",
    "song_url": "audio/sample1.mp3",
    "type": "POLISH_SECULAR",
    "files": [
        {
            "name": "File 1 bla bla bla bla",
            "type": "VISIBLE",
            "id": "1G1_ce39VL-e3LEFEmeqM7DPH-qPhda4n"
        },
        {
            "name": "File 2 bla bla bla bla",
            "type": "VISIBLE",
            "id": "1G1_ce39VL-e3LEFEmeqM7DPH-qPhda4n"
        },
        {
            "name": "File 3 bla bla bla bla",
            "type": "PROTECTED",
            "id": ""
        },
    ]
},
{
    "title": "Canon In D 8",
    "artist": "Canon Artist",
    "song_url": "audio/sample1.mp3",
    "type": "POLISH_SECULAR",
    "files": [
        {
            "name": "File 1 bla bla bla bla",
            "type": "VISIBLE",
            "id": "1G1_ce39VL-e3LEFEmeqM7DPH-qPhda4n"
        },
        {
            "name": "File 2 bla bla bla bla",
            "type": "VISIBLE",
            "id": "1G1_ce39VL-e3LEFEmeqM7DPH-qPhda4n"
        },
        {
            "name": "File 3 bla bla bla bla",
            "type": "PROTECTED",
            "id": ""
        },
    ]
},
{
    "title": "Canon In D 9",
    "artist": "Canon Artist",
    "song_url": "audio/sample1.mp3",
    "type": "POLISH_SECULAR",
    "files": [
        {
            "name": "File 1 bla bla bla bla",
            "type": "VISIBLE",
            "id": "1G1_ce39VL-e3LEFEmeqM7DPH-qPhda4n"
        },
        {
            "name": "File 2 bla bla bla bla",
            "type": "VISIBLE",
            "id": "1G1_ce39VL-e3LEFEmeqM7DPH-qPhda4n"
        },
        {
            "name": "File 3 bla bla bla bla",
            "type": "PROTECTED",
            "id": ""
        },
    ]
},
{
    "title": "Canon In D 10",
    "artist": "Canon Artist",
    "song_url": "audio/sample1.mp3",
    "type": "POLISH_SECULAR",
    "files": [
        {
            "name": "File 1 bla bla bla bla",
            "type": "VISIBLE",
            "id": "1G1_ce39VL-e3LEFEmeqM7DPH-qPhda4n"
        },
        {
            "name": "File 2 bla bla bla bla",
            "type": "VISIBLE",
            "id": "1G1_ce39VL-e3LEFEmeqM7DPH-qPhda4n"
        },
        {
            "name": "File 3 bla bla bla bla",
            "type": "PROTECTED",
            "id": ""
        },
    ]
},
{
    "title": "Canon In D 11",
    "artist": "Canon Artist",
    "song_url": "audio/sample1.mp3",
    "type": "POLISH_SECULAR",
    "files": [
        {
            "name": "File 1 bla bla bla bla",
            "type": "VISIBLE",
            "id": "1G1_ce39VL-e3LEFEmeqM7DPH-qPhda4n"
        },
        {
            "name": "File 2 bla bla bla bla",
            "type": "VISIBLE",
            "id": "1G1_ce39VL-e3LEFEmeqM7DPH-qPhda4n"
        },
        {
            "name": "File 3 bla bla bla bla",
            "type": "PROTECTED",
            "id": ""
        },
    ]
},
{
    "title": "Canon In D 12",
    "artist": "Canon Artist",
    "song_url": "audio/sample1.mp3",
    "type": "POLISH_SECULAR",
    "files": [
        {
            "name": "File 1 bla bla bla bla",
            "type": "VISIBLE",
            "id": "1G1_ce39VL-e3LEFEmeqM7DPH-qPhda4n"
        },
        {
            "name": "File 2 bla bla bla bla",
            "type": "VISIBLE",
            "id": "1G1_ce39VL-e3LEFEmeqM7DPH-qPhda4n"
        },
        {
            "name": "File 3 bla bla bla bla",
            "type": "PROTECTED",
            "id": ""
        },
    ]
},
{
    "title": "Canon In D 13",
    "artist": "Canon Artist",
    "song_url": "audio/sample1.mp3",
    "type": "POLISH_SECULAR",
    "files": [
        {
            "name": "File 1 bla bla bla bla",
            "type": "VISIBLE",
            "id": "1G1_ce39VL-e3LEFEmeqM7DPH-qPhda4n"
        },
        {
            "name": "File 2 bla bla bla bla",
            "type": "VISIBLE",
            "id": "1G1_ce39VL-e3LEFEmeqM7DPH-qPhda4n"
        },
        {
            "name": "File 3 bla bla bla bla",
            "type": "PROTECTED",
            "id": ""
        },
    ]
},
{
    "title": "Canon In D 14",
    "artist": "Canon Artist",
    "song_url": "audio/sample1.mp3",
    "type": "POLISH_SECULAR",
    "files": [
        {
            "name": "File 1 bla bla bla bla",
            "type": "VISIBLE",
            "id": "1G1_ce39VL-e3LEFEmeqM7DPH-qPhda4n"
        },
        {
            "name": "File 2 bla bla bla bla",
            "type": "VISIBLE",
            "id": "1G1_ce39VL-e3LEFEmeqM7DPH-qPhda4n"
        },
        {
            "name": "File 3 bla bla bla bla",
            "type": "PROTECTED",
            "id": ""
        },
    ]
},
{
    "title": "Canon In D 15",
    "artist": "Canon Artist",
    "song_url": "audio/sample1.mp3",
    "type": "POLISH_SECULAR",
    "files": [
        {
            "name": "File 1 bla bla bla bla",
            "type": "VISIBLE",
            "id": "1G1_ce39VL-e3LEFEmeqM7DPH-qPhda4n"
        },
        {
            "name": "File 2 bla bla bla bla",
            "type": "VISIBLE",
            "id": "1G1_ce39VL-e3LEFEmeqM7DPH-qPhda4n"
        },
        {
            "name": "File 3 bla bla bla bla",
            "type": "PROTECTED",
            "id": ""
        },
    ]
},
{
    "title": "Canon In D 16",
    "artist": "Canon Artist",
    "song_url": "audio/sample1.mp3",
    "type": "POLISH_SECULAR",
    "files": [
        {
            "name": "File 1 bla bla bla bla",
            "type": "VISIBLE",
            "id": "1G1_ce39VL-e3LEFEmeqM7DPH-qPhda4n"
        },
        {
            "name": "File 2 bla bla bla bla",
            "type": "VISIBLE",
            "id": "1G1_ce39VL-e3LEFEmeqM7DPH-qPhda4n"
        },
        {
            "name": "File 3 bla bla bla bla",
            "type": "PROTECTED",
            "id": ""
        },
    ]
},
{
    "title": "Canon In D 17",
    "artist": "Canon Artist",
    "song_url": "audio/sample1.mp3",
    "type": "POLISH_SECULAR",
    "files": [
        {
            "name": "File 1 bla bla bla bla",
            "type": "VISIBLE",
            "id": "1G1_ce39VL-e3LEFEmeqM7DPH-qPhda4n"
        },
        {
            "name": "File 2 bla bla bla bla",
            "type": "VISIBLE",
            "id": "1G1_ce39VL-e3LEFEmeqM7DPH-qPhda4n"
        },
        {
            "name": "File 3 bla bla bla bla",
            "type": "PROTECTED",
            "id": ""
        },
    ]
},
{
    "title": "My heart will go on 2",
    "artist": "Canon Artist",
    "song_url": "audio/sample1.mp3",
    "type": "POLISH_SECULAR",
    "files": [
        {
            "name": "File 1 bla bla bla bla",
            "type": "VISIBLE",
            "id": "1G1_ce39VL-e3LEFEmeqM7DPH-qPhda4n"
        },
        {
            "name": "File 2 bla bla bla bla",
            "type": "VISIBLE",
            "id": "1G1_ce39VL-e3LEFEmeqM7DPH-qPhda4n"
        },
        {
            "name": "File 3 bla bla bla bla",
            "type": "PROTECTED",
            "id": ""
        },
    ]
},
{
    "title": "My heart will go on 3",
    "artist": "Canon Artist",
    "song_url": "audio/sample1.mp3",
    "type": "POLISH_SECULAR",
    "files": [
        {
            "name": "File 1 bla bla bla bla",
            "type": "VISIBLE",
            "id": "1G1_ce39VL-e3LEFEmeqM7DPH-qPhda4n"
        },
        {
            "name": "File 2 bla bla bla bla",
            "type": "VISIBLE",
            "id": "1G1_ce39VL-e3LEFEmeqM7DPH-qPhda4n"
        },
        {
            "name": "File 3 bla bla bla bla",
            "type": "PROTECTED",
            "id": ""
        },
    ]
},
{
    "title": "My heart will go on 4",
    "artist": "Canon Artist",
    "song_url": "audio/sample1.mp3",
    "type": "POLISH_SECULAR",
    "files": [
        {
            "name": "File 1 bla bla bla bla",
            "type": "VISIBLE",
            "id": "1G1_ce39VL-e3LEFEmeqM7DPH-qPhda4n"
        },
        {
            "name": "File 2 bla bla bla bla",
            "type": "VISIBLE",
            "id": "1G1_ce39VL-e3LEFEmeqM7DPH-qPhda4n"
        },
        {
            "name": "File 3 bla bla bla bla",
            "type": "PROTECTED",
            "url": ""
        },
    ]
},
{
    "title": "My heart will go on 5",
    "artist": "Canon Artist",
    "song_url": "audio/sample1.mp3",
    "type": "POLISH_SECULAR",
    "files": [
        {
            "name": "File 1 bla bla bla bla",
            "type": "VISIBLE",
            "id": "1G1_ce39VL-e3LEFEmeqM7DPH-qPhda4n"
        },
        {
            "name": "File 2 bla bla bla bla",
            "type": "VISIBLE",
            "id": "1G1_ce39VL-e3LEFEmeqM7DPH-qPhda4n"
        },
        {
            "name": "File 3 bla bla bla bla",
            "type": "PROTECTED",
            "url": ""
        },
    ]
},
{
    "title": "Symphony No. 41",
    "artist": "Wolfgang Amadeus Mozart",
    "song_url": "audio/sample1.mp3",
    "type": "POLISH_SECULAR",
    "files": [
        {
            "name": "File 1 bla bla bla bla",
            "type": "VISIBLE",
            "id": "1G1_ce39VL-e3LEFEmeqM7DPH-qPhda4n"
        },
        {
            "name": "File 2 bla bla bla bla",
            "type": "VISIBLE",
            "id": "1G1_ce39VL-e3LEFEmeqM7DPH-qPhda4n"
        },
        {
            "name": "File 3 bla bla bla bla",
            "type": "PROTECTED",
            "url": ""
        },
    ]
},
{
    "title": "Symphony No. 3, Eroica",
    "artist": "Ludwig van Beethoven",
    "song_url": "audio/sample1.mp3",
    "type": "POLISH_CHURCH",
    "files": [
        {
            "name": "File 1 bla bla bla bla",
            "type": "VISIBLE",
            "id": "1G1_ce39VL-e3LEFEmeqM7DPH-qPhda4n"
        },
        {
            "name": "File 2 bla bla bla bla",
            "type": "VISIBLE",
            "id": "1G1_ce39VL-e3LEFEmeqM7DPH-qPhda4n"
        },
        {
            "name": "File 3 bla bla bla bla",
            "type": "PROTECTED",
            "url": ""
        },
    ]
},
{
    "title": "Pastoral Symphony, or Recollections of Country Life",
    "artist": "Ludwig van Beethoven",
    "song_url": "audio/sample1.mp3",
    "type": "POLISH_CHURCH",
    "files": [
        {
            "name": "File 1 bla bla bla bla",
            "type": "VISIBLE",
            "id": "1G1_ce39VL-e3LEFEmeqM7DPH-qPhda4n"
        },
        {
            "name": "File 2 bla bla bla bla",
            "type": "VISIBLE",
            "id": "1G1_ce39VL-e3LEFEmeqM7DPH-qPhda4n"
        },
        {
            "name": "File 3 bla bla bla bla",
            "type": "PROTECTED",
            "url": ""
        },
    ]
},
{
    "title": "Five violin concertos and one without solo",
    "artist": "Antonio Vivaldi",
    "song_url": "audio/sample1.mp3",
    "type": "INTERNATIONAL_SECULAR",
    "files": [
        {
            "name": "File 1 bla bla bla bla",
            "type": "VISIBLE",
            "id": "1G1_ce39VL-e3LEFEmeqM7DPH-qPhda4n"
        },
        {
            "name": "File 2 bla bla bla bla",
            "type": "VISIBLE",
            "id": "1G1_ce39VL-e3LEFEmeqM7DPH-qPhda4n"
        },
        {
            "name": "File 3 bla bla bla bla",
            "type": "PROTECTED",
            "url": ""
        },
    ]
},
{
    "title": "Silent Night / Cicha noc",
    "artist": "Franz Gruber",
    "song_url": "audio/Franz_Gruber__Silent_Night_Cicha_Nocmp3.mp3",
    "type": "INTERNATIONAL_CHURCH",
    "files": [
        {
            "name": "Piano, Vocal Score",
            "type": "VISIBLE",
            "id": "1p_AG0pbzmpicd1j0ioXoF0XDodZSpl2j"
        },
        {
            "name": "Full Score",
            "type": "VISIBLE",
            "id": "1sQSE0Gy-DyMLVwniU1CMrFW3J1VkCDb6"
        },
        // {
        // 	"name": "File 3 bla bla bla bla",
        // 	"type": "PROTECTED",
        // 	"url": ""
        // },
    ]
},
{
    "title": "Six violin concertos",
    "artist": "Antonio Vivaldi",
    "song_url": "audio/sample1.mp3",
    "type": "INTERNATIONAL_CHURCH",
    "files": [
        {
            "name": "File 1 bla bla bla bla",
            "type": "VISIBLE",
            "id": "1G1_ce39VL-e3LEFEmeqM7DPH-qPhda4n"
        },
        {
            "name": "File 2 bla bla bla bla",
            "type": "VISIBLE",
            "id": "1G1_ce39VL-e3LEFEmeqM7DPH-qPhda4n"
        },
        {
            "name": "File 3 bla bla bla bla",
            "type": "PROTECTED",
            "url": ""
        },
    ]
}
]

var contentWayPoint = function() {
    var i = 0;
    $('.animate-box').waypoint( function( direction ) {
        if( direction === 'down' && !$(this.element).hasClass('animated-fast') ) {
            i++;
            if(($(this.element).parent().hasClass('music-sheet-design-bg')) ||
            ($(this.element).is('#choral-arrangements-heading')) ||
            ($(this.element).hasClass('search-box-wrapper')) ||
            ($(this.element).parent().parent().parent().parent().hasClass('arrangement-nav')))
            {
                return;
            }
            $(this.element).addClass('item-animate');
            setTimeout(function(){

                $('body .animate-box.item-animate').each(function(k){
                    var el = $(this);
                    setTimeout( function () {
                        var effect = el.data('animate-effect');
                        if ( effect === 'fadeIn') {
                            el.addClass('fadeIn animated-fast');
                        } else if ( effect === 'fadeInLeft') {
                            el.addClass('fadeInLeft animated-fast');
                        } else if ( effect === 'fadeInRight') {
                            el.addClass('fadeInRight animated-fast');
                        } else {
                            el.addClass('fadeInUp animated-fast');
                        }

                        el.removeClass('item-animate');
                    },  k * 200, 'easeInOutExpo' );
                });
            }, 100);
        }
    } , { offset: '100%' } );
};

function getActiveTabSongs() {
    var active_tab = $(".arrangement-nav .active span").text();
    var newSongsData = []
    for(var i=0; i<songs_data.length; i++) {
        var song_type = songs_data[i]["type"];
        if (active_tab === "Polish Secular Music" && song_type === "POLISH_SECULAR") {
            x = 1;
        } else if (active_tab === "Polish Church Music" && song_type === "POLISH_CHURCH") {
            x = 1;
        } else if (active_tab === "International Secular Music" && song_type === "INTERNATIONAL_SECULAR") {
            x = 1;
        } else if (active_tab === "International Church Music" && song_type === "INTERNATIONAL_CHURCH") {
            x = 1;
        } else {
            continue;
        }
        newSongsData.push(songs_data[i]);
    }
    return newSongsData;
}

function getSearchMatchingSongs() {
    $('.alert-no-arrangements-found').hide();
    $('.arrangement-nav').hide();
    var textsearch = $('#search-box').val().toLowerCase()
    if(textsearch === "") {
        $('.arrangement-nav').show();
        $('.alert-arrangements-found').hide();
        return getActiveTabSongs();
    }
    $('.alert-arrangements-found').show();
    $('.alert-arrangements-found span#entered-search-text').html(textsearch);
    // var currentTabSongs = getActiveTabSongs();

    var currentTabSongs = songs_data;
    var newSongsData = [];
    for(var i=0; i<currentTabSongs.length; i++) {
        if(currentTabSongs[i]["title"].toLowerCase().indexOf(textsearch) >=0 || currentTabSongs[i]["artist"].toLowerCase().indexOf(textsearch) >=0) {
            newSongsData.push(currentTabSongs[i]);
        }
    }
    if (!newSongsData.length) {
        // $('.alert-arrangements-found').hide();
        $('.alert-no-arrangements-found').show();
    }
    return newSongsData;
}

function buildSongCards(songs_data) {
var total_song_cards = $('.song-card').length;
var count = 0
if (!total_song_cards) {
    $('.panel-group.arrangements-page').html('');
}
var i;
for (i=total_song_cards; i<songs_data.length; i++) {
    if(count == 10) {
        $(".show-more-arrangements").removeClass('animated-fast fadeInUp').show()
        return;
    }
    var visible_files = [];
    var protected_files = [];
    var visible_music_sheets = '';
    var protected_music_sheets = '';
    var collapse_in = '';
    var collapsed_flag = '';

    var song_name = songs_data[i]["title"];
    var artist_name = songs_data[i]["artist"];
    var song_url = songs_data[i]["song_url"];
    var files = songs_data[i]["files"];
    for (var j=0; j<files.length; j++) {
        if(files[j]["type"] === "VISIBLE") {
            visible_files.push(files[j]);
        }
        else if(files[j]["type"] === "PROTECTED") {
            protected_files.push(files[j]);
        }
    }
    if(visible_files) {
        for(var j=0; j<visible_files.length; j++) {
            file_name = visible_files[j]["name"];
            var file_id = visible_files[j]["id"];
            visible_music_sheets = visible_music_sheets + '<div class="row"><div class="col-md-11 col-sm-11 col-xs-11 music-sheet"><span>' + file_name + '</span></div><div class="col-md-1 col-sm-1 col-xs-1 view-music-sheet"><a href="#" data="' + file_id + '" class="btn-view-music-sheet" title="View Music Sheet" data-toggle="modal" data-target="#myModal" alt="Music Sheet"><img src="images/music-sheet.png"/></a></div></div>';
        }
    }
    if(protected_files) {
        for(var j=0; j<protected_files.length; j++) {
            var file_name = protected_files[j]["name"];
            protected_music_sheets = protected_music_sheets + '<div class="row"><div class="col-md-11 col-sm-11 col-xs-11 music-sheet"><span>' + file_name + '</span></div><div class="col-md-1 col-sm-1 col-xs-1 view-music-sheet"><a href="mailto:mjaskiewiczmusic@gmail.com" class="btn-paid-music-sheet"><img src="images/mail.png"/></a></div></div>';
        }
    }
    if(count === 0 && !total_song_cards) {
        collapse_in = 'in';
    }
    else {
        collapsed_flag = 'collapsed';
    }
    var song_card = '<div class="panel panel-default song-card animate-box fadeIn"><div class="panel-heading" role="tab" id="headingOne"><h4 class="panel-title"><div class="container-flex"><div class="row"><div class="col-md-6 col-sm-12 song-name"><span class="song">' + song_name + '</span><span class="artist">' + artist_name + '</span></div><div class="col-md-5 col-sm-12 audio-player"><audio controls><source src="' + song_url + '" type="audio/mpeg">Your browser does not support the audio element.</audio></div><div class="col-md-1 col-sm-12 expand"><a class="collapse-arrow ' + collapsed_flag + '" role="button" data-toggle="collapse" data-parent="#accordion" href="#collapse' + i + '" aria-expanded="true" aria-controls="collapse' + count + '"><img src="images/down-arrow.png"/></a></div></div></div></h4></div><div id="collapse' + i + '" class="panel-collapse collapse ' + collapse_in + '" role="tabpanel" aria-labelledby="headingOne"><div class="panel-body">' + visible_music_sheets + protected_music_sheets + '</div></div></div>';
    $(".panel-group").append(song_card);
    count++;
}
if(i == songs_data.length) {
    $('.show-more-arrangements').hide();
}
}

buildSongCards(getActiveTabSongs());

jQuery('#search-box').on('input', function() {
    $('.panel-group').html('');
    var newSongsData = getSearchMatchingSongs();
    buildSongCards(newSongsData);
    $('.song-card').each(function(i) {
        var x = $(this)
        setTimeout(function() {
            $(x).addClass('animated-fast fadeInUp');
        }, 100*i);
    });
});
$('a#clear-search-arrangements').click(function() {
    $('#search-box').val('');
    $('.panel-group').html('');
    $('.arrangement-nav').show();
    $('.alert-arrangements-found').hide()
    $('.alert-no-arrangements-found').hide();
    buildSongCards(getActiveTabSongs());
    contentWayPoint();
});

$('.arrangement-nav .menu-item').click(function() {
    $('#search-box').val('');
    $('.arrangement-nav .menu-item.active').removeClass('active');
    $(this).addClass('active');
    $(".panel-group").html('')
    buildSongCards(getActiveTabSongs());
    contentWayPoint();
});

$('.show-more-arrangements').click(function() {
    buildSongCards(getSearchMatchingSongs());
    contentWayPoint();
})
$('audio').on('play', function(x) {
    var og_audio = this;
    $('audio').each(function(){
        if (this !== og_audio) {
            this.pause(); // Stop playing
            this.currentTime = 0; // Reset time
        }
    });
});